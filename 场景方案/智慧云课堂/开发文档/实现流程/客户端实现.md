# 客户端实现

### 初始化

- SDK初始化，调用认证接口Login，返回IM信息，异步调用IM登录，忽略IM登录状态

### 加入课程（建议界面分两步，先创建生成一条课程信息）

- 分为两步，首先创建课程，再加入课程

1. 首先根据参数调用config，生成房间信息，如果房间已存在，提示已存在
2. 加入课堂，加入前检测IM是否已经登录，没登录需要登录，登录失败返回加入失败， 调用服务器接口entry接口，成功后，进入课程页面， 根据状态，加入音视频房间.
3. 请求快照（http:）
4. 开始初始化和更新本地流

### 流程图

<image width="12%" src="../../Images/flow1.jpg">

### 接收和处理透传消息通知

- 接收到IM透传消息通知，内容包括频道内的房间配置、人员信息、流信息、举手、白板状态等

- 结合缓存的对比SequenceId序号前后衔接是否有遗漏。如果没有遗漏，就根据类型区分处理消息，类型包括房间配置、人员信息、流信息、举手、白板状态等；如果有遗漏，会查询丢失数据，再重复该步骤。

### 流程图

<image width="23%" src="../../Images/flow2.jpg">



### 注销

- 离开RTC频道，RTC频道释放，IM释放

### 流程图

<image width="12%" src="../../Images/flow3.jpg">

